{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Sign Up - ApplyWizz</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">

<div class="container py-5">
    <div class="col-md-5 mx-auto card p-4">
        <h3 class="text-center mb-4">Sign Up</h3>

        <div id="signupStep1">
            <label>Email</label>
            <input type="email" id="email" class="form-control mb-3" placeholder="Enter your email">

            <label>Mobile Number</label>
            <input type="text" id="mobile" class="form-control mb-3" placeholder="Enter your mobile number">

            <button id="sendSignupOtpBtn" class="btn btn-success w-100">Send OTP</button>
        </div>

        <div id="signupStep2" style="display:none;">
            <label>Enter OTP</label>
            <input type="text" id="otp" class="form-control mb-3" placeholder="Enter 4-digit OTP">
            <button id="verifySignupOtpBtn" class="btn btn-primary w-100">Verify OTP</button>
        </div>

        <div id="signupMessage" class="mt-3 text-center"></div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$("#sendSignupOtpBtn").click(function(){
    $.post("{% url 'send_signup_otp' %}", {
        email: $("#email").val(),
        mobile: $("#mobile").val(),
        csrfmiddlewaretoken: '{{ csrf_token }}'
    }, function(data){
        if(data.status === "success"){
            $("#signupMessage").text(data.message).css("color","green");
            $("#signupStep1").hide();
            $("#signupStep2").show();
        } else {
            $("#signupMessage").text(data.message).css("color","red");
        }
    });
});

$("#verifySignupOtpBtn").click(function(){
    $.post("{% url 'verify_signup_otp' %}", {
        email: $("#email").val(),
        otp: $("#otp").val(),
        csrfmiddlewaretoken: '{{ csrf_token }}'
    }, function(data){
        if(data.status === "success"){
            window.location.href = data.redirect_url;
        } else {
            $("#signupMessage").text(data.message).css("color","red");
        }
    });
});
</script>

</body>
</html>
